<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pong Game</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #000;
            color: #fff;
            text-align: center;
            font-family: Arial, sans-serif;
        }
        canvas {
            background-color: #333;
            display: block;
            margin: 20px auto;
            border: 2px solid #fff;
        }
        .scoreboard {
            margin: 20px 0;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="display-4">Pong Game</h1>
        <div class="scoreboard">
            Player 1: <span id="player1Score">0</span> | Player 2: <span id="player2Score">0</span> | Player 3: <span id="player3Score">0</span> | Player 4: <span id="player4Score">0</span>
        </div>
        <canvas id="pongCanvas" width="700" height="700"></canvas>
        <button class="btn btn-primary mt-4" onclick="startGame()">Start Game</button>
    </div>

    <script>
        const canvas = document.getElementById('pongCanvas');
        const ctx = canvas.getContext('2d');

        let ball = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            radius: 10,
            dx: 4,
            dy: 4
        };

        let paddle1 = {
            width: 10,
            height: 100,
            x: 0,
            y: canvas.height / 2 - 50,
            dy: 8,
            moveUp: false,
            moveDown: false
        };

        let paddle2 = {
            width: 10,
            height: 100,
            x: canvas.width - 10,
            y: canvas.height / 2 - 50,
            dy: 8,
            moveUp: false,
            moveDown: false
        };

        let paddle3 = {
            width: 100,
            height: 10,
            x: canvas.width / 2 - 50,
            y: 0,
            dx: 8,
            moveLeft: false,
            moveRight: false
        }

        let paddle4 = {
            width: 100,
            height: 10,
            x: canvas.width / 2 - 50,
            y: canvas.height - 10,
            dx: 8,
            moveLeft: false,
            moveRight: false
        }

        let player1Score = 0;
        let player2Score = 0;
        let player3Score = 0;
        let player4Score = 0;

        function drawBall() {
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
            ctx.fillStyle = '#fff';
            ctx.fill();
            ctx.closePath();
        }

        function drawPaddle(x, y, width, height) {
            ctx.fillStyle = '#fff';
            ctx.fillRect(x, y, width, height);
        }

        function moveBall() {
            ball.x += ball.dx;
            ball.y += ball.dy;

            /* REBOTE EN LAS PAREDES SUPERIOR E INFERIOR
            if (ball.y + ball.radius > canvas.height || ball.y - ball.radius < 0) {
                ball.dy = -ball.dy;
            }*/

            if (ball.y + - ball.radius < 0) {
                player1Score++;
                updateScore();
                resetBall();
            } else if (ball.x + ball.radius > canvas.height) {
                player3Score++;
                updateScore();
                resetBall();
            } else if (ball.x + ball.radius > canvas.width) {
                player2Score++;
                updateScore();
                resetBall();
            } else if (ball.x - ball.radius < 0) {
                player4Score++;
                updateScore();
                resetBall();
            }

            if (ball.x - ball.radius < paddle1.x + paddle1.width && ball.y > paddle1.y && ball.y < paddle1.y + paddle1.height) {
                ball.dx = -ball.dx;
            } else if (ball.x + ball.radius > paddle2.x && ball.y > paddle2.y && ball.y < paddle2.y + paddle2.height) {
                ball.dx = -ball.dx;
            } else if (ball.y - ball.radius < paddle3.y + paddle3.height && ball.x > paddle3.x && ball.x < paddle3.x + paddle3.width) {
                ball.dy = -ball.dy;
            } else if (ball.y + ball.radius > paddle4.y && ball.x > paddle3.x && ball.x < paddle4.x + paddle3.width) {
                ball.dy = -ball.dy;
            }
        }

        function resetBall() {
            ball.x = canvas.width / 2;
            ball.y = canvas.height / 2;
            ball.dx = -ball.dx;
        }

        function movePaddles() {
            if (paddle1.moveUp && paddle1.y > 0) {
                paddle1.y -= paddle1.dy;
            } else if (paddle1.moveDown && paddle1.y + paddle1.height < canvas.height) {
                paddle1.y += paddle1.dy;
            }

            if (paddle2.moveUp && paddle2.y > 0) {
                paddle2.y -= paddle2.dy;
            } else if (paddle2.moveDown && paddle2.y + paddle2.height < canvas.height) {
                paddle2.y += paddle2.dy;
            }

            if (paddle3.moveLeft && paddle3.x > 0) {
                paddle3.x -= paddle3.dx;
            } else if (paddle3.moveRight && paddle3.x + paddle3.width < canvas.width) {
                paddle3.x += paddle3.dx;
            }

            if (paddle4.moveLeft && paddle4.x > 0) {
                paddle4.x -= paddle4.dx;
            } else if (paddle4.moveRight && paddle4.x + paddle4.width < canvas.width) {
                paddle4.x += paddle4.dx;
            }
        }

        function updateScore() {
            document.getElementById('player1Score').textContent = player1Score;
            document.getElementById('player2Score').textContent = player2Score;
            document.getElementById('player3Score').textContent = player3Score;
            document.getElementById('player4Score').textContent = player4Score;
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawBall();
            drawPaddle(paddle1.x, paddle1.y, paddle1.width, paddle1.height);
            drawPaddle(paddle2.x, paddle2.y, paddle2.width, paddle2.height);
            drawPaddle(paddle3.x, paddle3.y, paddle3.width, paddle3.height);
            drawPaddle(paddle4.x, paddle4.y, paddle4.width, paddle4.height);
            moveBall();
            movePaddles();
        }

        function startGame() {
            setInterval(draw, 1000 / 60); // 60 FPS
        }

        // Listeners para las teclas
        document.addEventListener('keydown', function(event) {
            switch (event.key) {
                case '1':
                    paddle3.moveLeft = true;
                    break;
                case '2':
                    paddle3.moveRight = true;
                    break;
                case '9':
                    paddle4.moveLeft = true;
                    break;
                case '0':
                    paddle4.moveRight = true;
                    break;
                case 'w':
                case 'W':
                    paddle1.moveUp = true;
                    break;
                case 's':
                case 'S':
                    paddle1.moveDown = true;
                    break;
                case 'ArrowUp':
                    paddle2.moveUp = true;
                    break;
                case 'ArrowDown':
                    paddle2.moveDown = true;
                    break;
            }
        });

        document.addEventListener('keyup', function(event) {
            switch (event.key) {
                case '1':
                    paddle3.moveLeft = false;
                    break;
                case '2':
                    paddle3.moveRight = false;
                    break;
                case '9':
                    paddle4.moveLeft = false;
                    break;
                case '0':
                    paddle4.moveRight = false;
                    break;
                case 'w':
                case 'W':
                    paddle1.moveUp = false;
                    break;
                case 's':
                case 'S':
                    paddle1.moveDown = false;
                    break;
                case 'ArrowUp':
                    paddle2.moveUp = false;
                    break;
                case 'ArrowDown':
                    paddle2.moveDown = false;
                    break;
            }
        });
    </script>
</body>
</html>
